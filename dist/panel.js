(()=>{var H=e=>e<200?"":e<300?"success":e<400?"redirect":"fail";var Z=Object.prototype.toString,E=Array.isArray||function(t){return Z.call(t)==="[object Array]"};function B(e){return typeof e=="function"}function ee(e){return E(e)?"array":typeof e}function A(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function _(e,t){return e!=null&&typeof e=="object"&&t in e}function te(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var re=RegExp.prototype.test;function ne(e,t){return re.call(e,t)}var oe=/\S/;function se(e){return!ne(oe,e)}var ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function ie(e){return String(e).replace(/[&<>"'`=\/]/g,function(r){return ae[r]})}var ue=/\s*/,ce=/\s+/,j=/\s*=/,pe=/\s*\}/,le=/#|\^|\/|>|\{|&|=|!/;function fe(e,t){if(!e)return[];var r=!1,n=[],o=[],s=[],a=!1,i=!1,u="",c=0;function f(){if(a&&!i)for(;s.length;)delete o[s.pop()];else s=[];a=!1,i=!1}var v,b,D;function M(y){if(typeof y=="string"&&(y=y.split(ce,2)),!E(y)||y.length!==2)throw new Error("Invalid tags: "+y);v=new RegExp(A(y[0])+"\\s*"),b=new RegExp("\\s*"+A(y[1])),D=new RegExp("\\s*"+A("}"+y[1]))}M(t||m.tags);for(var p=new x(e),w,d,h,S,$,T;!p.eos();){if(w=p.pos,h=p.scanUntil(v),h)for(var U=0,Y=h.length;U<Y;++U)S=h.charAt(U),se(S)?(s.push(o.length),u+=S):(i=!0,r=!0,u+=" "),o.push(["text",S,w,w+1]),w+=1,S===`
`&&(f(),u="",c=0,r=!1);if(!p.scan(v))break;if(a=!0,d=p.scan(le)||"name",p.scan(ue),d==="="?(h=p.scanUntil(j),p.scan(j),p.scanUntil(b)):d==="{"?(h=p.scanUntil(D),p.scan(pe),p.scanUntil(b),d="&"):h=p.scanUntil(b),!p.scan(b))throw new Error("Unclosed tag at "+p.pos);if(d==">"?$=[d,h,w,p.pos,u,c,r]:$=[d,h,w,p.pos],c++,o.push($),d==="#"||d==="^")n.push($);else if(d==="/"){if(T=n.pop(),!T)throw new Error('Unopened section "'+h+'" at '+w);if(T[1]!==h)throw new Error('Unclosed section "'+T[1]+'" at '+w)}else d==="name"||d==="{"||d==="&"?i=!0:d==="="&&M(h)}if(f(),T=n.pop(),T)throw new Error('Unclosed section "'+T[1]+'" at '+p.pos);return he(de(o))}function de(e){for(var t=[],r,n,o=0,s=e.length;o<s;++o)r=e[o],r&&(r[0]==="text"&&n&&n[0]==="text"?(n[1]+=r[1],n[3]=r[3]):(t.push(r),n=r));return t}function he(e){for(var t=[],r=t,n=[],o,s,a=0,i=e.length;a<i;++a)switch(o=e[a],o[0]){case"#":case"^":r.push(o),n.push(o),r=o[4]=[];break;case"/":s=n.pop(),s[5]=o[2],r=n.length>0?n[n.length-1][4]:t;break;default:r.push(o)}return t}function x(e){this.string=e,this.tail=e,this.pos=0}x.prototype.eos=function(){return this.tail===""};x.prototype.scan=function(t){var r=this.tail.match(t);if(!r||r.index!==0)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};x.prototype.scanUntil=function(t){var r=this.tail.search(t),n;switch(r){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=n.length,n};function R(e,t){this.view=e,this.cache={".":this.view},this.parent=t}R.prototype.push=function(t){return new R(t,this)};R.prototype.lookup=function(t){var r=this.cache,n;if(r.hasOwnProperty(t))n=r[t];else{for(var o=this,s,a,i,u=!1;o;){if(t.indexOf(".")>0)for(s=o.view,a=t.split("."),i=0;s!=null&&i<a.length;)i===a.length-1&&(u=_(s,a[i])||te(s,a[i])),s=s[a[i++]];else s=o.view[t],u=_(o.view,t);if(u){n=s;break}o=o.parent}r[t]=n}return B(n)&&(n=n.call(this.view)),n};function l(){this.templateCache={_cache:{},set:function(t,r){this._cache[t]=r},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}l.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};l.prototype.parse=function(t,r){var n=this.templateCache,o=t+":"+(r||m.tags).join(":"),s=typeof n<"u",a=s?n.get(o):void 0;return a==null&&(a=fe(t,r),s&&n.set(o,a)),a};l.prototype.render=function(t,r,n,o){var s=this.getConfigTags(o),a=this.parse(t,s),i=r instanceof R?r:new R(r,void 0);return this.renderTokens(a,i,n,t,o)};l.prototype.renderTokens=function(t,r,n,o,s){for(var a="",i,u,c,f=0,v=t.length;f<v;++f)c=void 0,i=t[f],u=i[0],u==="#"?c=this.renderSection(i,r,n,o,s):u==="^"?c=this.renderInverted(i,r,n,o,s):u===">"?c=this.renderPartial(i,r,n,s):u==="&"?c=this.unescapedValue(i,r):u==="name"?c=this.escapedValue(i,r,s):u==="text"&&(c=this.rawValue(i)),c!==void 0&&(a+=c);return a};l.prototype.renderSection=function(t,r,n,o,s){var a=this,i="",u=r.lookup(t[1]);function c(b){return a.render(b,r,n,s)}if(u){if(E(u))for(var f=0,v=u.length;f<v;++f)i+=this.renderTokens(t[4],r.push(u[f]),n,o,s);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")i+=this.renderTokens(t[4],r.push(u),n,o,s);else if(B(u)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(r.view,o.slice(t[3],t[5]),c),u!=null&&(i+=u)}else i+=this.renderTokens(t[4],r,n,o,s);return i}};l.prototype.renderInverted=function(t,r,n,o,s){var a=r.lookup(t[1]);if(!a||E(a)&&a.length===0)return this.renderTokens(t[4],r,n,o,s)};l.prototype.indentPartial=function(t,r,n){for(var o=r.replace(/[^ \t]/g,""),s=t.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!n)&&(s[a]=o+s[a]);return s.join(`
`)};l.prototype.renderPartial=function(t,r,n,o){if(n){var s=this.getConfigTags(o),a=B(n)?n(t[1]):n[t[1]];if(a!=null){var i=t[6],u=t[5],c=t[4],f=a;u==0&&c&&(f=this.indentPartial(a,c,i));var v=this.parse(f,s);return this.renderTokens(v,r,n,f,o)}}};l.prototype.unescapedValue=function(t,r){var n=r.lookup(t[1]);if(n!=null)return n};l.prototype.escapedValue=function(t,r,n){var o=this.getConfigEscape(n)||m.escape,s=r.lookup(t[1]);if(s!=null)return typeof s=="number"&&o===m.escape?String(s):o(s)};l.prototype.rawValue=function(t){return t[1]};l.prototype.getConfigTags=function(t){return E(t)?t:t&&typeof t=="object"?t.tags:void 0};l.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!E(t))return t.escape};var m={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){k.templateCache=e},get templateCache(){return k.templateCache}},k=new l;m.clearCache=function(){return k.clearCache()};m.parse=function(t,r){return k.parse(t,r)};m.render=function(t,r,n,o){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+ee(t)+'" was given as the first argument for mustache#render(template, view, partials)');return k.render(t,r,n,o)};m.escape=ie;m.Scanner=x;m.Context=R;m.Writer=l;var I=m;var O=async(e,t)=>{let r=await new Promise(n=>{e.getContent(o=>{n(o)})});return e.response.content={...e.response.content,text:r},I.render(`${t.trim()}`,e)};var L="har_parser_settings";var F=async()=>{let e=await fetch("./defaultTemplate.mustache");if(!e.body)throw"No template response";let t=e.body.getReader(),{value:r}=await t.read();return new TextDecoder().decode(r)};var W=async()=>{let e=await chrome.storage.local.get(L);return e[L]&&e[L].template?e[L].template:F()};var C=(e,t)=>{let r=document.querySelector(e);if(!r)throw`Button element (${e}) not found.`;r.addEventListener("click",t),document.addEventListener("beforeunload",()=>{r.removeEventListener("click",t)})};var K=e=>new Promise((t,r)=>{let n=document.createElement("textarea");n.value=e,document.body.append(n),n.select();let o=document.execCommand("copy");n.remove(),o||r(new Error("Unable to write to clipboard")),t()});var N=({index:e,entry:t})=>{let r=document.querySelector(`#button-${e}`);if(!r)throw`Cell for button not found: "#button-${e}"`;let n=document.createElement("button"),o=new URL(t.request.url);n.classList.add("href-button"),n.setAttribute("data-index",e.toString()),n.innerText=o.href.replace(o.origin,""),r.appendChild(n);let s=document.querySelector(`#report-${e}`);if(!s)throw`Report tr not found: "#report-${e}"`;let a=async()=>{let i=s.querySelector("pre");if(!i)throw"Report pre element not found";let u=await W();if(!i.textContent){let c=await O(t,u);i.innerHTML=c}s.classList.toggle("hidden")};C(`#button-${e} button.href-button`,a),C(`#report-${e} button.copy`,async i=>{let u=s.querySelector("pre").innerText;try{await K(u),i.target.innerText="Copied!",i.target.setAttribute("disabled","true"),setTimeout(()=>{i.target.innerText="Copy",i.target.removeAttribute("disabled")},1e3)}catch(c){console.error(c)}})};var z=(e,t)=>{let r=document.querySelector(`${"#table"} tbody`),{status:n}=e.response,{method:o}=e.request,s=H(n);r.insertAdjacentHTML("beforeend",`<tr>
      <td>
        <time datetime="${e.startedDateTime}" class="time">
          ${new Date(e.startedDateTime).toLocaleTimeString()}
        </time>
      </td>
      <td>${o}</td>
      <td>
        <span class="status ${s}">
          ${n}
        </span>
      </td>
      <td class="endpoint" id="button-${t}"></td>
    </tr>
    <tr class="hidden report ${s}" id="report-${t}">
      <td colspan="4">
        <button type="button" class="copy">
          Copy
        </button>
        <pre></pre>
      </td>
    </tr>
    `),N({index:t,entry:e})};var g={requests:[],isRecording:!0,allowedResourceTypes:["xhr","fetch"]};var G=(e,t)=>{let r=document.querySelector(e);if(!r)throw`Element selector ${e} not found.`;r.innerText=t};var P=e=>{G("#status",`Entries: ${e}`)};var J=()=>{g.requests.length=0;let e=document.querySelector(`${"#table"} tbody`);if(!e)throw`${"#table"} element not found`;e.innerHTML="",P(0)};var Q=e=>typeof e=="string";var me=()=>{let e=document.querySelector("#status-dot");if(!e)throw`${"#status-dot"} not found`;let t="status-dot--recording";if(g.isRecording&&!e.classList.contains(t)){e.classList.add(t);return}e.classList.remove(t)},V=e=>{g.isRecording=!g.isRecording,e.target.innerText=g.isRecording?"Pause":"Restore",me()};var X=e=>`chrome-extension://${chrome.runtime.id}/${e}`;chrome.devtools.network.onRequestFinished.addListener(e=>{if(!g.isRecording)return;if(!Q(e._resourceType))throw"request._resourceType value is not string";if(!g.allowedResourceTypes.includes(e._resourceType))return;let t=g.requests.push(e);z(e,t-1),P(t)}),document.addEventListener("beforeunload",()=>{g.requests.length=0}),document.addEventListener("DOMContentLoaded",()=>{C("#reset",J),C("#pause",V);let e=document.querySelector("#settings-link");e&&(e.href=X("settings.html"))});})();
/*! Bundled license information:

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)
*/
