(()=>{var M=e=>e<200?"":e<300?"success":e<400?"redirect":"fail";var Q=Object.prototype.toString,T=Array.isArray||function(t){return Q.call(t)==="[object Array]"};function D(e){return typeof e=="function"}function V(e){return T(e)?"array":typeof e}function B(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function H(e,t){return e!=null&&typeof e=="object"&&t in e}function X(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var Y=RegExp.prototype.test;function Z(e,t){return Y.call(e,t)}var ee=/\S/;function te(e){return!Z(ee,e)}var re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function ne(e){return String(e).replace(/[&<>"'`=\/]/g,function(r){return re[r]})}var oe=/\s*/,se=/\s+/,j=/\s*=/,ae=/\s*\}/,ie=/#|\^|\/|>|\{|&|=|!/;function ue(e,t){if(!e)return[];var r=!1,n=[],o=[],s=[],a=!1,u=!1,i="",c=0;function p(){if(a&&!u)for(;s.length;)delete o[s.pop()];else s=[];a=!1,u=!1}var m,b,U;function A(y){if(typeof y=="string"&&(y=y.split(se,2)),!T(y)||y.length!==2)throw new Error("Invalid tags: "+y);m=new RegExp(B(y[0])+"\\s*"),b=new RegExp("\\s*"+B(y[1])),U=new RegExp("\\s*"+B("}"+y[1]))}A(t||v.tags);for(var l=new k(e),w,d,h,S,L,R;!l.eos();){if(w=l.pos,h=l.scanUntil(m),h)for(var P=0,J=h.length;P<J;++P)S=h.charAt(P),te(S)?(s.push(o.length),i+=S):(u=!0,r=!0,i+=" "),o.push(["text",S,w,w+1]),w+=1,S===`
`&&(p(),i="",c=0,r=!1);if(!l.scan(m))break;if(a=!0,d=l.scan(ie)||"name",l.scan(oe),d==="="?(h=l.scanUntil(j),l.scan(j),l.scanUntil(b)):d==="{"?(h=l.scanUntil(U),l.scan(ae),l.scanUntil(b),d="&"):h=l.scanUntil(b),!l.scan(b))throw new Error("Unclosed tag at "+l.pos);if(d==">"?L=[d,h,w,l.pos,i,c,r]:L=[d,h,w,l.pos],c++,o.push(L),d==="#"||d==="^")n.push(L);else if(d==="/"){if(R=n.pop(),!R)throw new Error('Unopened section "'+h+'" at '+w);if(R[1]!==h)throw new Error('Unclosed section "'+R[1]+'" at '+w)}else d==="name"||d==="{"||d==="&"?u=!0:d==="="&&A(h)}if(p(),R=n.pop(),R)throw new Error('Unclosed section "'+R[1]+'" at '+l.pos);return le(ce(o))}function ce(e){for(var t=[],r,n,o=0,s=e.length;o<s;++o)r=e[o],r&&(r[0]==="text"&&n&&n[0]==="text"?(n[1]+=r[1],n[3]=r[3]):(t.push(r),n=r));return t}function le(e){for(var t=[],r=t,n=[],o,s,a=0,u=e.length;a<u;++a)switch(o=e[a],o[0]){case"#":case"^":r.push(o),n.push(o),r=o[4]=[];break;case"/":s=n.pop(),s[5]=o[2],r=n.length>0?n[n.length-1][4]:t;break;default:r.push(o)}return t}function k(e){this.string=e,this.tail=e,this.pos=0}k.prototype.eos=function(){return this.tail===""};k.prototype.scan=function(t){var r=this.tail.match(t);if(!r||r.index!==0)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};k.prototype.scanUntil=function(t){var r=this.tail.search(t),n;switch(r){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=n.length,n};function E(e,t){this.view=e,this.cache={".":this.view},this.parent=t}E.prototype.push=function(t){return new E(t,this)};E.prototype.lookup=function(t){var r=this.cache,n;if(r.hasOwnProperty(t))n=r[t];else{for(var o=this,s,a,u,i=!1;o;){if(t.indexOf(".")>0)for(s=o.view,a=t.split("."),u=0;s!=null&&u<a.length;)u===a.length-1&&(i=H(s,a[u])||X(s,a[u])),s=s[a[u++]];else s=o.view[t],i=H(o.view,t);if(i){n=s;break}o=o.parent}r[t]=n}return D(n)&&(n=n.call(this.view)),n};function f(){this.templateCache={_cache:{},set:function(t,r){this._cache[t]=r},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}f.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};f.prototype.parse=function(t,r){var n=this.templateCache,o=t+":"+(r||v.tags).join(":"),s=typeof n<"u",a=s?n.get(o):void 0;return a==null&&(a=ue(t,r),s&&n.set(o,a)),a};f.prototype.render=function(t,r,n,o){var s=this.getConfigTags(o),a=this.parse(t,s),u=r instanceof E?r:new E(r,void 0);return this.renderTokens(a,u,n,t,o)};f.prototype.renderTokens=function(t,r,n,o,s){for(var a="",u,i,c,p=0,m=t.length;p<m;++p)c=void 0,u=t[p],i=u[0],i==="#"?c=this.renderSection(u,r,n,o,s):i==="^"?c=this.renderInverted(u,r,n,o,s):i===">"?c=this.renderPartial(u,r,n,s):i==="&"?c=this.unescapedValue(u,r):i==="name"?c=this.escapedValue(u,r,s):i==="text"&&(c=this.rawValue(u)),c!==void 0&&(a+=c);return a};f.prototype.renderSection=function(t,r,n,o,s){var a=this,u="",i=r.lookup(t[1]);function c(b){return a.render(b,r,n,s)}if(i){if(T(i))for(var p=0,m=i.length;p<m;++p)u+=this.renderTokens(t[4],r.push(i[p]),n,o,s);else if(typeof i=="object"||typeof i=="string"||typeof i=="number")u+=this.renderTokens(t[4],r.push(i),n,o,s);else if(D(i)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");i=i.call(r.view,o.slice(t[3],t[5]),c),i!=null&&(u+=i)}else u+=this.renderTokens(t[4],r,n,o,s);return u}};f.prototype.renderInverted=function(t,r,n,o,s){var a=r.lookup(t[1]);if(!a||T(a)&&a.length===0)return this.renderTokens(t[4],r,n,o,s)};f.prototype.indentPartial=function(t,r,n){for(var o=r.replace(/[^ \t]/g,""),s=t.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!n)&&(s[a]=o+s[a]);return s.join(`
`)};f.prototype.renderPartial=function(t,r,n,o){if(n){var s=this.getConfigTags(o),a=D(n)?n(t[1]):n[t[1]];if(a!=null){var u=t[6],i=t[5],c=t[4],p=a;i==0&&c&&(p=this.indentPartial(a,c,u));var m=this.parse(p,s);return this.renderTokens(m,r,n,p,o)}}};f.prototype.unescapedValue=function(t,r){var n=r.lookup(t[1]);if(n!=null)return n};f.prototype.escapedValue=function(t,r,n){var o=this.getConfigEscape(n)||v.escape,s=r.lookup(t[1]);if(s!=null)return typeof s=="number"&&o===v.escape?String(s):o(s)};f.prototype.rawValue=function(t){return t[1]};f.prototype.getConfigTags=function(t){return T(t)?t:t&&typeof t=="object"?t.tags:void 0};f.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!T(t))return t.escape};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){C.templateCache=e},get templateCache(){return C.templateCache}},C=new f;v.clearCache=function(){return C.clearCache()};v.parse=function(t,r){return C.parse(t,r)};v.render=function(t,r,n,o){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+V(t)+'" was given as the first argument for mustache#render(template, view, partials)');return C.render(t,r,n,o)};v.escape=ne;v.Scanner=k;v.Context=E;v.Writer=f;var I=v;var O=async(e,t)=>{let r=await new Promise(n=>{e.getContent(o=>{n(o)})});return e.response.content={...e.response.content,text:r},console.log("Report created for",e.request.url),I.render(`${t.trim()}`,e)};var _=async()=>{let e=await fetch("./defaultTemplate.mustache");if(!e.body)throw Error();let t=e.body.getReader(),{value:r}=await t.read();return new TextDecoder().decode(r)};var x=(e,t)=>{let r=document.querySelector(e);if(!r)throw`Button element (${e}) not found.`;r.addEventListener("click",t),document.addEventListener("beforeunload",()=>{r.removeEventListener("click",t)})};var W=({index:e,entry:t})=>{let r=document.querySelector(`#button-${e}`);if(!r)throw`Button not found: "#button-${e}"`;let n=document.createElement("button"),o=new URL(t.request.url);n.classList.add("href-button"),n.setAttribute("data-index",e.toString()),n.innerText=o.href.replace(o.origin,"");let s=async a=>{let u=a.target.dataset.index,i=document.querySelector(`#report-${u}`);if(!i)throw`Report tr not found: "#report-${u}"`;let c=i.querySelector("pre");if(!c)throw"Report pre element not found";let p=await _();if(!c.textContent){let m=await O(t,p);c.innerHTML=m}i.classList.toggle("hidden")};r.appendChild(n),x(`#button-${e} button`,s)};var F=(e,t)=>{let r=document.querySelector(`${"#table"} tbody`),{status:n}=e.response,{method:o}=e.request,s=M(n);r.insertAdjacentHTML("beforeend",`<tr>
      <td>
        <time datetime="${e.startedDateTime}" class="time">
          ${new Date(e.startedDateTime).toLocaleTimeString()}
        </time>
      </td>
      <td>${o}</td>
      <td>
        <span class="status ${s}">
          ${n}
        </span>
      </td>
      <td class="endpoint" id="button-${t}"></td>
    </tr>
    <tr class="hidden report ${s}" id="report-${t}">
      <td colspan="4">
        <pre></pre>
      </td>
    </tr>
    `),W({index:t,entry:e})};var g={requests:[],isRecording:!0,allowedResourceTypes:["xhr","fetch"]};document.addEventListener("beforeunload",()=>{g.requests.length=0});var N=(e,t)=>{let r=document.querySelector(e);if(!r)throw`Element selector ${e} not found.`;r.innerText=t};var q=e=>{N("#status",`Entries: ${e}`)};var K=()=>{g.requests.length=0;let e=document.querySelector(`${"#table"} tbody`);if(!e)throw`${"#table"} element not found`;e.innerHTML="",q(0)};var z=e=>typeof e=="string";var pe=()=>{let e=document.querySelector("#status-dot");if(!e)throw`${"#status-dot"} not found`;let t="status-dot--recording";if(g.isRecording&&!e.classList.contains(t)){e.classList.add(t);return}e.classList.remove(t)},G=e=>{g.isRecording=!g.isRecording,e.target.innerText=g.isRecording?"Pause":"Restore",pe()};chrome.devtools.network.onRequestFinished.addListener(e=>{if(!g.isRecording)return;if(!z(e._resourceType))throw"request._resourceType value is not string";if(!g.allowedResourceTypes.includes(e._resourceType))return;let t=g.requests.push(e);F(e,t-1),q(t)}),document.addEventListener("DOMContentLoaded",()=>{x("#reset",K),x("#pause",G)});})();
/*! Bundled license information:

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)
*/
