(()=>{var q=(t,e)=>{let r=document.querySelector(t);if(!r)throw`Element selector ${t} not found.`;r.innerText=e};var M=t=>t<200?"":t<300?"success":t<400?"redirect":"fail";var F=Object.prototype.toString,S=Array.isArray||function(e){return F.call(e)==="[object Array]"};function P(t){return typeof t=="function"}function N(t){return S(t)?"array":typeof t}function x(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function A(t,e){return t!=null&&typeof t=="object"&&e in t}function K(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var z=RegExp.prototype.test;function G(t,e){return z.call(t,e)}var J=/\S/;function Q(t){return!G(J,t)}var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function X(t){return String(t).replace(/[&<>"'`=\/]/g,function(r){return V[r]})}var Y=/\s*/,Z=/\s+/,j=/\s*=/,ee=/\s*\}/,te=/#|\^|\/|>|\{|&|=|!/;function re(t,e){if(!t)return[];var r=!1,n=[],s=[],o=[],a=!1,i=!1,u="",c=0;function f(){if(a&&!i)for(;o.length;)delete s[o.pop()];else o=[];a=!1,i=!1}var g,m,U;function B(y){if(typeof y=="string"&&(y=y.split(Z,2)),!S(y)||y.length!==2)throw new Error("Invalid tags: "+y);g=new RegExp(x(y[0])+"\\s*"),m=new RegExp("\\s*"+x(y[1])),U=new RegExp("\\s*"+x("}"+y[1]))}B(e||v.tags);for(var l=new R(t),w,d,h,T,k,b;!l.eos();){if(w=l.pos,h=l.scanUntil(g),h)for(var $=0,_=h.length;$<_;++$)T=h.charAt($),Q(T)?(o.push(s.length),u+=T):(i=!0,r=!0,u+=" "),s.push(["text",T,w,w+1]),w+=1,T===`
`&&(f(),u="",c=0,r=!1);if(!l.scan(g))break;if(a=!0,d=l.scan(te)||"name",l.scan(Y),d==="="?(h=l.scanUntil(j),l.scan(j),l.scanUntil(m)):d==="{"?(h=l.scanUntil(U),l.scan(ee),l.scanUntil(m),d="&"):h=l.scanUntil(m),!l.scan(m))throw new Error("Unclosed tag at "+l.pos);if(d==">"?k=[d,h,w,l.pos,u,c,r]:k=[d,h,w,l.pos],c++,s.push(k),d==="#"||d==="^")n.push(k);else if(d==="/"){if(b=n.pop(),!b)throw new Error('Unopened section "'+h+'" at '+w);if(b[1]!==h)throw new Error('Unclosed section "'+b[1]+'" at '+w)}else d==="name"||d==="{"||d==="&"?i=!0:d==="="&&B(h)}if(f(),b=n.pop(),b)throw new Error('Unclosed section "'+b[1]+'" at '+l.pos);return se(ne(s))}function ne(t){for(var e=[],r,n,s=0,o=t.length;s<o;++s)r=t[s],r&&(r[0]==="text"&&n&&n[0]==="text"?(n[1]+=r[1],n[3]=r[3]):(e.push(r),n=r));return e}function se(t){for(var e=[],r=e,n=[],s,o,a=0,i=t.length;a<i;++a)switch(s=t[a],s[0]){case"#":case"^":r.push(s),n.push(s),r=s[4]=[];break;case"/":o=n.pop(),o[5]=s[2],r=n.length>0?n[n.length-1][4]:e;break;default:r.push(s)}return e}function R(t){this.string=t,this.tail=t,this.pos=0}R.prototype.eos=function(){return this.tail===""};R.prototype.scan=function(e){var r=this.tail.match(e);if(!r||r.index!==0)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};R.prototype.scanUntil=function(e){var r=this.tail.search(e),n;switch(r){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=n.length,n};function E(t,e){this.view=t,this.cache={".":this.view},this.parent=e}E.prototype.push=function(e){return new E(e,this)};E.prototype.lookup=function(e){var r=this.cache,n;if(r.hasOwnProperty(e))n=r[e];else{for(var s=this,o,a,i,u=!1;s;){if(e.indexOf(".")>0)for(o=s.view,a=e.split("."),i=0;o!=null&&i<a.length;)i===a.length-1&&(u=A(o,a[i])||K(o,a[i])),o=o[a[i++]];else o=s.view[e],u=A(s.view,e);if(u){n=o;break}s=s.parent}r[e]=n}return P(n)&&(n=n.call(this.view)),n};function p(){this.templateCache={_cache:{},set:function(e,r){this._cache[e]=r},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}p.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};p.prototype.parse=function(e,r){var n=this.templateCache,s=e+":"+(r||v.tags).join(":"),o=typeof n<"u",a=o?n.get(s):void 0;return a==null&&(a=re(e,r),o&&n.set(s,a)),a};p.prototype.render=function(e,r,n,s){var o=this.getConfigTags(s),a=this.parse(e,o),i=r instanceof E?r:new E(r,void 0);return this.renderTokens(a,i,n,e,s)};p.prototype.renderTokens=function(e,r,n,s,o){for(var a="",i,u,c,f=0,g=e.length;f<g;++f)c=void 0,i=e[f],u=i[0],u==="#"?c=this.renderSection(i,r,n,s,o):u==="^"?c=this.renderInverted(i,r,n,s,o):u===">"?c=this.renderPartial(i,r,n,o):u==="&"?c=this.unescapedValue(i,r):u==="name"?c=this.escapedValue(i,r,o):u==="text"&&(c=this.rawValue(i)),c!==void 0&&(a+=c);return a};p.prototype.renderSection=function(e,r,n,s,o){var a=this,i="",u=r.lookup(e[1]);function c(m){return a.render(m,r,n,o)}if(u){if(S(u))for(var f=0,g=u.length;f<g;++f)i+=this.renderTokens(e[4],r.push(u[f]),n,s,o);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")i+=this.renderTokens(e[4],r.push(u),n,s,o);else if(P(u)){if(typeof s!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(r.view,s.slice(e[3],e[5]),c),u!=null&&(i+=u)}else i+=this.renderTokens(e[4],r,n,s,o);return i}};p.prototype.renderInverted=function(e,r,n,s,o){var a=r.lookup(e[1]);if(!a||S(a)&&a.length===0)return this.renderTokens(e[4],r,n,s,o)};p.prototype.indentPartial=function(e,r,n){for(var s=r.replace(/[^ \t]/g,""),o=e.split(`
`),a=0;a<o.length;a++)o[a].length&&(a>0||!n)&&(o[a]=s+o[a]);return o.join(`
`)};p.prototype.renderPartial=function(e,r,n,s){if(n){var o=this.getConfigTags(s),a=P(n)?n(e[1]):n[e[1]];if(a!=null){var i=e[6],u=e[5],c=e[4],f=a;u==0&&c&&(f=this.indentPartial(a,c,i));var g=this.parse(f,o);return this.renderTokens(g,r,n,f,s)}}};p.prototype.unescapedValue=function(e,r){var n=r.lookup(e[1]);if(n!=null)return n};p.prototype.escapedValue=function(e,r,n){var s=this.getConfigEscape(n)||v.escape,o=r.lookup(e[1]);if(o!=null)return typeof o=="number"&&s===v.escape?String(o):s(o)};p.prototype.rawValue=function(e){return e[1]};p.prototype.getConfigTags=function(e){return S(e)?e:e&&typeof e=="object"?e.tags:void 0};p.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!S(e))return e.escape};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){C.templateCache=t},get templateCache(){return C.templateCache}},C=new p;v.clearCache=function(){return C.clearCache()};v.parse=function(e,r){return C.parse(e,r)};v.render=function(e,r,n,s){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+N(e)+'" was given as the first argument for mustache#render(template, view, partials)');return C.render(e,r,n,s)};v.escape=X;v.Scanner=R;v.Context=E;v.Writer=p;var H=v;var I=`{{request.method}} {{response.status}} {{request.url}}

Payload:

{{request.postData.text}}

Response:

{{response.content.text}}`;var O=async t=>{let e=await new Promise(r=>{t.getContent(n=>{r(n)})});return t.response.content={...t.response.content,text:e},console.log("Report created for",t.request.url),H.render(`<pre>${I.trim()}</pre>`,t)};var D=(t,e)=>{let r=document.querySelector(`#button-${t}`);if(!r)throw`Button not found: "#button-${t}"`;let n=document.createElement("button"),s=new URL(e.request.url);n.classList.add("href-button"),n.setAttribute("data-index",t.toString()),n.innerText=s.href.replace(s.origin,""),n.addEventListener("click",async o=>{let a=o.target.dataset.index,i=document.querySelector(`#report-${a}`);if(!i)throw`Report tr not found: "#report-${a}"`;let u=i.querySelector("td");if(!u)throw"Report td element not found";if(!u.textContent){let c=await O(e);u.innerHTML=c}i.classList.toggle("hidden")}),r.appendChild(n)};var L=[],W=()=>{let t=document.querySelector("#table");if(!L.length){q("#status","No requests available"),t.classList.add("hidden");return}q("#status",""),t.classList.remove("hidden"),q("#status",`Entries: ${L.length}`);let e=document.querySelector("#table tbody");e.innerHTML="",L.forEach(async(r,n)=>{let{status:s}=r.response,{method:o}=r.request,a=M(s);e.insertAdjacentHTML("beforeend",`<tr>
          <td>
            <time datetime="${r.startedDateTime}" class="time">
              ${new Date(r.startedDateTime).toLocaleTimeString()}
            </time>
          </td>
          <td>${o}</td>
          <td>
            <span class="status ${a}">
              ${s}
            </span>
          </td>
          <td class="endpoint" id="button-${n}"></td>
        </tr>
        <tr class="hidden report ${a}" id="report-${n}">
          <td colspan="4"></td>
        </tr>
        `),D(n,r)})};(()=>{chrome.devtools.network.onRequestFinished.addListener(e=>{["xhr","fetch"].includes(e._resourceType)&&L.push(e)});let t=document.querySelector("#load");if(!t)throw"Button element (##load) not found.";document.addEventListener("DOMContentLoaded",()=>{t.addEventListener("click",W)}),document.addEventListener("beforeunload",()=>{t.removeEventListener("click",W)})})();})();
/*! Bundled license information:

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)
*/
