(()=>{var L=(t,e)=>{let r=document.querySelector(t);if(!r)throw`Element selector ${t} not found.`;r.innerText=e};var M=t=>t<200?"":t<300?"success":t<400?"redirect":"fail";var N=Object.prototype.toString,T=Array.isArray||function(e){return N.call(e)==="[object Array]"};function P(t){return typeof t=="function"}function K(t){return T(t)?"array":typeof t}function x(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function A(t,e){return t!=null&&typeof t=="object"&&e in t}function z(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var G=RegExp.prototype.test;function J(t,e){return G.call(t,e)}var Q=/\S/;function V(t){return!J(Q,t)}var X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Y(t){return String(t).replace(/[&<>"'`=\/]/g,function(r){return X[r]})}var Z=/\s*/,ee=/\s+/,j=/\s*=/,te=/\s*\}/,re=/#|\^|\/|>|\{|&|=|!/;function ne(t,e){if(!t)return[];var r=!1,n=[],s=[],o=[],a=!1,i=!1,c="",u=0;function p(){if(a&&!i)for(;o.length;)delete s[o.pop()];else o=[];a=!1,i=!1}var g,m,U;function B(y){if(typeof y=="string"&&(y=y.split(ee,2)),!T(y)||y.length!==2)throw new Error("Invalid tags: "+y);g=new RegExp(x(y[0])+"\\s*"),m=new RegExp("\\s*"+x(y[1])),U=new RegExp("\\s*"+x("}"+y[1]))}B(e||v.tags);for(var l=new C(t),w,d,h,S,k,b;!l.eos();){if(w=l.pos,h=l.scanUntil(g),h)for(var $=0,F=h.length;$<F;++$)S=h.charAt($),V(S)?(o.push(s.length),c+=S):(i=!0,r=!0,c+=" "),s.push(["text",S,w,w+1]),w+=1,S===`
`&&(p(),c="",u=0,r=!1);if(!l.scan(g))break;if(a=!0,d=l.scan(re)||"name",l.scan(Z),d==="="?(h=l.scanUntil(j),l.scan(j),l.scanUntil(m)):d==="{"?(h=l.scanUntil(U),l.scan(te),l.scanUntil(m),d="&"):h=l.scanUntil(m),!l.scan(m))throw new Error("Unclosed tag at "+l.pos);if(d==">"?k=[d,h,w,l.pos,c,u,r]:k=[d,h,w,l.pos],u++,s.push(k),d==="#"||d==="^")n.push(k);else if(d==="/"){if(b=n.pop(),!b)throw new Error('Unopened section "'+h+'" at '+w);if(b[1]!==h)throw new Error('Unclosed section "'+b[1]+'" at '+w)}else d==="name"||d==="{"||d==="&"?i=!0:d==="="&&B(h)}if(p(),b=n.pop(),b)throw new Error('Unclosed section "'+b[1]+'" at '+l.pos);return oe(se(s))}function se(t){for(var e=[],r,n,s=0,o=t.length;s<o;++s)r=t[s],r&&(r[0]==="text"&&n&&n[0]==="text"?(n[1]+=r[1],n[3]=r[3]):(e.push(r),n=r));return e}function oe(t){for(var e=[],r=e,n=[],s,o,a=0,i=t.length;a<i;++a)switch(s=t[a],s[0]){case"#":case"^":r.push(s),n.push(s),r=s[4]=[];break;case"/":o=n.pop(),o[5]=s[2],r=n.length>0?n[n.length-1][4]:e;break;default:r.push(s)}return e}function C(t){this.string=t,this.tail=t,this.pos=0}C.prototype.eos=function(){return this.tail===""};C.prototype.scan=function(e){var r=this.tail.match(e);if(!r||r.index!==0)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};C.prototype.scanUntil=function(e){var r=this.tail.search(e),n;switch(r){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=n.length,n};function E(t,e){this.view=t,this.cache={".":this.view},this.parent=e}E.prototype.push=function(e){return new E(e,this)};E.prototype.lookup=function(e){var r=this.cache,n;if(r.hasOwnProperty(e))n=r[e];else{for(var s=this,o,a,i,c=!1;s;){if(e.indexOf(".")>0)for(o=s.view,a=e.split("."),i=0;o!=null&&i<a.length;)i===a.length-1&&(c=A(o,a[i])||z(o,a[i])),o=o[a[i++]];else o=s.view[e],c=A(s.view,e);if(c){n=o;break}s=s.parent}r[e]=n}return P(n)&&(n=n.call(this.view)),n};function f(){this.templateCache={_cache:{},set:function(e,r){this._cache[e]=r},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}f.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};f.prototype.parse=function(e,r){var n=this.templateCache,s=e+":"+(r||v.tags).join(":"),o=typeof n<"u",a=o?n.get(s):void 0;return a==null&&(a=ne(e,r),o&&n.set(s,a)),a};f.prototype.render=function(e,r,n,s){var o=this.getConfigTags(s),a=this.parse(e,o),i=r instanceof E?r:new E(r,void 0);return this.renderTokens(a,i,n,e,s)};f.prototype.renderTokens=function(e,r,n,s,o){for(var a="",i,c,u,p=0,g=e.length;p<g;++p)u=void 0,i=e[p],c=i[0],c==="#"?u=this.renderSection(i,r,n,s,o):c==="^"?u=this.renderInverted(i,r,n,s,o):c===">"?u=this.renderPartial(i,r,n,o):c==="&"?u=this.unescapedValue(i,r):c==="name"?u=this.escapedValue(i,r,o):c==="text"&&(u=this.rawValue(i)),u!==void 0&&(a+=u);return a};f.prototype.renderSection=function(e,r,n,s,o){var a=this,i="",c=r.lookup(e[1]);function u(m){return a.render(m,r,n,o)}if(c){if(T(c))for(var p=0,g=c.length;p<g;++p)i+=this.renderTokens(e[4],r.push(c[p]),n,s,o);else if(typeof c=="object"||typeof c=="string"||typeof c=="number")i+=this.renderTokens(e[4],r.push(c),n,s,o);else if(P(c)){if(typeof s!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(r.view,s.slice(e[3],e[5]),u),c!=null&&(i+=c)}else i+=this.renderTokens(e[4],r,n,s,o);return i}};f.prototype.renderInverted=function(e,r,n,s,o){var a=r.lookup(e[1]);if(!a||T(a)&&a.length===0)return this.renderTokens(e[4],r,n,s,o)};f.prototype.indentPartial=function(e,r,n){for(var s=r.replace(/[^ \t]/g,""),o=e.split(`
`),a=0;a<o.length;a++)o[a].length&&(a>0||!n)&&(o[a]=s+o[a]);return o.join(`
`)};f.prototype.renderPartial=function(e,r,n,s){if(n){var o=this.getConfigTags(s),a=P(n)?n(e[1]):n[e[1]];if(a!=null){var i=e[6],c=e[5],u=e[4],p=a;c==0&&u&&(p=this.indentPartial(a,u,i));var g=this.parse(p,o);return this.renderTokens(g,r,n,p,s)}}};f.prototype.unescapedValue=function(e,r){var n=r.lookup(e[1]);if(n!=null)return n};f.prototype.escapedValue=function(e,r,n){var s=this.getConfigEscape(n)||v.escape,o=r.lookup(e[1]);if(o!=null)return typeof o=="number"&&s===v.escape?String(o):s(o)};f.prototype.rawValue=function(e){return e[1]};f.prototype.getConfigTags=function(e){return T(e)?e:e&&typeof e=="object"?e.tags:void 0};f.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!T(e))return e.escape};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){R.templateCache=t},get templateCache(){return R.templateCache}},R=new f;v.clearCache=function(){return R.clearCache()};v.parse=function(e,r){return R.parse(e,r)};v.render=function(e,r,n,s){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+K(e)+'" was given as the first argument for mustache#render(template, view, partials)');return R.render(e,r,n,s)};v.escape=Y;v.Scanner=C;v.Context=E;v.Writer=f;var H=v;var I=async(t,e)=>{let r=await new Promise(n=>{t.getContent(s=>{n(s)})});return t.response.content={...t.response.content,text:r},console.log("Report created for",t.request.url),H.render(`${e.trim()}`,t)};var O=(t,e,r)=>{let n=document.querySelector(`#button-${t}`);if(!n)throw`Button not found: "#button-${t}"`;let s=document.createElement("button"),o=new URL(e.request.url);s.classList.add("href-button"),s.setAttribute("data-index",t.toString()),s.innerText=o.href.replace(o.origin,""),s.addEventListener("click",async a=>{let i=a.target.dataset.index,c=document.querySelector(`#report-${i}`);if(!c)throw`Report tr not found: "#report-${i}"`;let u=c.querySelector("pre");if(!u)throw"Report pre element not found";if(!u.textContent){let p=await I(e,r);u.innerHTML=p}c.classList.toggle("hidden")}),n.appendChild(s)};var _=async()=>{let t=await fetch("./defaultTemplate.mustache");if(!t.body)throw Error();let e=t.body.getReader(),{value:r}=await e.read();return new TextDecoder().decode(r)};var D=t=>typeof t=="string";var q=[],ae=["xhr","fetch"],W=async()=>{let t=document.querySelector("#table");if(!q.length){L("#status","No requests available"),t.classList.add("hidden");return}L("#status",""),t.classList.remove("hidden"),L("#status",`Entries: ${q.length}`);let e=document.querySelector("#table tbody");e.innerHTML="";let r=await _();q.forEach(async(n,s)=>{let{status:o}=n.response,{method:a}=n.request,i=M(o);e.insertAdjacentHTML("beforeend",`<tr>
          <td>
            <time datetime="${n.startedDateTime}" class="time">
              ${new Date(n.startedDateTime).toLocaleTimeString()}
            </time>
          </td>
          <td>${a}</td>
          <td>
            <span class="status ${i}">
              ${o}
            </span>
          </td>
          <td class="endpoint" id="button-${s}"></td>
        </tr>
        <tr class="hidden report ${i}" id="report-${s}">
          <td colspan="4">
            <pre></pre>
          </td>
        </tr>
        `),O(s,n,r)})};(()=>{chrome.devtools.network.onRequestFinished.addListener(e=>{if(D(e._resourceType)){ae.includes(e._resourceType)&&q.push(e);return}throw"request._resourceType value is not string"});let t=document.querySelector("#load");if(!t)throw"Button element (##load) not found.";document.addEventListener("DOMContentLoaded",()=>{t.addEventListener("click",W)}),document.addEventListener("beforeunload",()=>{t.removeEventListener("click",W)})})();})();
/*! Bundled license information:

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)
*/
