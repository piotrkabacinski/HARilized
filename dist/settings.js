(()=>{var r=async()=>{let t=await fetch("./defaultTemplate.mustache");if(!t.body)throw Error();let e=t.body.getReader(),{value:o}=await e.read();return new TextDecoder().decode(o)};var n=t=>{t.preventDefault(),t.stopPropagation();let e=document.querySelector("form");if(!e)throw"Form element not found";if(!e.checkValidity()){e.reportValidity();return}console.log("submit...")};var a=(t,e)=>{let o=document.querySelector(t);if(!o)throw`Button element (${t}) not found.`;o.addEventListener("click",e),document.addEventListener("beforeunload",()=>{o.removeEventListener("click",e)})};var m=async()=>{if(!confirm("Are you sure to override current template?"))return;let e=await r(),o=document.querySelector("#report-template");if(!o)throw"Textarea element not found";o.value=e};{let t=document.querySelector("#report-template");t&&r().then(e=>{t.value=e,t.removeAttribute("disabled"),t.setAttribute("placeholder","Report template")}),a("form button[type='submit']",n),a("#restore-template",m)}})();
