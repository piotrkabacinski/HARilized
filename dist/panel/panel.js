(()=>{var V=Object.prototype.toString,R=Array.isArray||function(t){return V.call(t)==="[object Array]"};function B(e){return typeof e=="function"}function X(e){return R(e)?"array":typeof e}function H(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function U(e,t){return e!=null&&typeof e=="object"&&t in e}function Y(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var Z=RegExp.prototype.test;function ee(e,t){return Z.call(e,t)}var te=/\S/;function re(e){return!ee(te,e)}var ne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function se(e){return String(e).replace(/[&<>"'`=\/]/g,function(r){return ne[r]})}var oe=/\s*/,ie=/\s+/,_=/\s*=/,ae=/\s*\}/,ce=/#|\^|\/|>|\{|&|=|!/;function ue(e,t){if(!e)return[];var r=!1,n=[],s=[],o=[],i=!1,a=!1,c="",u=0;function d(){if(i&&!a)for(;o.length;)delete s[o.pop()];else o=[];i=!1,a=!1}var v,w,P;function D(y){if(typeof y=="string"&&(y=y.split(ie,2)),!R(y)||y.length!==2)throw new Error("Invalid tags: "+y);v=new RegExp(H(y[0])+"\\s*"),w=new RegExp("\\s*"+H(y[1])),P=new RegExp("\\s*"+H("}"+y[1]))}D(t||m.tags);for(var l=new S(e),b,f,h,k,$,T;!l.eos();){if(b=l.pos,h=l.scanUntil(v),h)for(var M=0,Q=h.length;M<Q;++M)k=h.charAt(M),re(k)?(o.push(s.length),c+=k):(a=!0,r=!0,c+=" "),s.push(["text",k,b,b+1]),b+=1,k===`
`&&(d(),c="",u=0,r=!1);if(!l.scan(v))break;if(i=!0,f=l.scan(ce)||"name",l.scan(oe),f==="="?(h=l.scanUntil(_),l.scan(_),l.scanUntil(w)):f==="{"?(h=l.scanUntil(P),l.scan(ae),l.scanUntil(w),f="&"):h=l.scanUntil(w),!l.scan(w))throw new Error("Unclosed tag at "+l.pos);if(f==">"?$=[f,h,b,l.pos,c,u,r]:$=[f,h,b,l.pos],u++,s.push($),f==="#"||f==="^")n.push($);else if(f==="/"){if(T=n.pop(),!T)throw new Error('Unopened section "'+h+'" at '+b);if(T[1]!==h)throw new Error('Unclosed section "'+T[1]+'" at '+b)}else f==="name"||f==="{"||f==="&"?a=!0:f==="="&&D(h)}if(d(),T=n.pop(),T)throw new Error('Unclosed section "'+T[1]+'" at '+l.pos);return pe(le(s))}function le(e){for(var t=[],r,n,s=0,o=e.length;s<o;++s)r=e[s],r&&(r[0]==="text"&&n&&n[0]==="text"?(n[1]+=r[1],n[3]=r[3]):(t.push(r),n=r));return t}function pe(e){for(var t=[],r=t,n=[],s,o,i=0,a=e.length;i<a;++i)switch(s=e[i],s[0]){case"#":case"^":r.push(s),n.push(s),r=s[4]=[];break;case"/":o=n.pop(),o[5]=s[2],r=n.length>0?n[n.length-1][4]:t;break;default:r.push(s)}return t}function S(e){this.string=e,this.tail=e,this.pos=0}S.prototype.eos=function(){return this.tail===""};S.prototype.scan=function(t){var r=this.tail.match(t);if(!r||r.index!==0)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};S.prototype.scanUntil=function(t){var r=this.tail.search(t),n;switch(r){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=n.length,n};function E(e,t){this.view=e,this.cache={".":this.view},this.parent=t}E.prototype.push=function(t){return new E(t,this)};E.prototype.lookup=function(t){var r=this.cache,n;if(r.hasOwnProperty(t))n=r[t];else{for(var s=this,o,i,a,c=!1;s;){if(t.indexOf(".")>0)for(o=s.view,i=t.split("."),a=0;o!=null&&a<i.length;)a===i.length-1&&(c=U(o,i[a])||Y(o,i[a])),o=o[i[a++]];else o=s.view[t],c=U(s.view,t);if(c){n=o;break}s=s.parent}r[t]=n}return B(n)&&(n=n.call(this.view)),n};function p(){this.templateCache={_cache:{},set:function(t,r){this._cache[t]=r},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}p.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};p.prototype.parse=function(t,r){var n=this.templateCache,s=t+":"+(r||m.tags).join(":"),o=typeof n<"u",i=o?n.get(s):void 0;return i==null&&(i=ue(t,r),o&&n.set(s,i)),i};p.prototype.render=function(t,r,n,s){var o=this.getConfigTags(s),i=this.parse(t,o),a=r instanceof E?r:new E(r,void 0);return this.renderTokens(i,a,n,t,s)};p.prototype.renderTokens=function(t,r,n,s,o){for(var i="",a,c,u,d=0,v=t.length;d<v;++d)u=void 0,a=t[d],c=a[0],c==="#"?u=this.renderSection(a,r,n,s,o):c==="^"?u=this.renderInverted(a,r,n,s,o):c===">"?u=this.renderPartial(a,r,n,o):c==="&"?u=this.unescapedValue(a,r):c==="name"?u=this.escapedValue(a,r,o):c==="text"&&(u=this.rawValue(a)),u!==void 0&&(i+=u);return i};p.prototype.renderSection=function(t,r,n,s,o){var i=this,a="",c=r.lookup(t[1]);function u(w){return i.render(w,r,n,o)}if(c){if(R(c))for(var d=0,v=c.length;d<v;++d)a+=this.renderTokens(t[4],r.push(c[d]),n,s,o);else if(typeof c=="object"||typeof c=="string"||typeof c=="number")a+=this.renderTokens(t[4],r.push(c),n,s,o);else if(B(c)){if(typeof s!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(r.view,s.slice(t[3],t[5]),u),c!=null&&(a+=c)}else a+=this.renderTokens(t[4],r,n,s,o);return a}};p.prototype.renderInverted=function(t,r,n,s,o){var i=r.lookup(t[1]);if(!i||R(i)&&i.length===0)return this.renderTokens(t[4],r,n,s,o)};p.prototype.indentPartial=function(t,r,n){for(var s=r.replace(/[^ \t]/g,""),o=t.split(`
`),i=0;i<o.length;i++)o[i].length&&(i>0||!n)&&(o[i]=s+o[i]);return o.join(`
`)};p.prototype.renderPartial=function(t,r,n,s){if(n){var o=this.getConfigTags(s),i=B(n)?n(t[1]):n[t[1]];if(i!=null){var a=t[6],c=t[5],u=t[4],d=i;c==0&&u&&(d=this.indentPartial(i,u,a));var v=this.parse(d,o);return this.renderTokens(v,r,n,d,s)}}};p.prototype.unescapedValue=function(t,r){var n=r.lookup(t[1]);if(n!=null)return n};p.prototype.escapedValue=function(t,r,n){var s=this.getConfigEscape(n)||m.escape,o=r.lookup(t[1]);if(o!=null)return typeof o=="number"&&s===m.escape?String(o):s(o)};p.prototype.rawValue=function(t){return t[1]};p.prototype.getConfigTags=function(t){return R(t)?t:t&&typeof t=="object"?t.tags:void 0};p.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!R(t))return t.escape};var m={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){C.templateCache=e},get templateCache(){return C.templateCache}},C=new p;m.clearCache=function(){return C.clearCache()};m.parse=function(t,r){return C.parse(t,r)};m.render=function(t,r,n,s){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+X(t)+'" was given as the first argument for mustache#render(template, view, partials)');return C.render(t,r,n,s)};m.escape=se;m.Scanner=S;m.Context=E;m.Writer=p;var j=m;var I=async(e,t)=>{let r=await new Promise(n=>{e.getContent(s=>{n(s)})});return e.response.content={...e.response.content,text:r},j.render(`${t.trim()}`,e)};var L="har_parser_settings";var N=async()=>{let e=await fetch("./defaultTemplate.mustache");if(!e.body)throw"No template response";let t=e.body.getReader(),{value:r}=await t.read();return new TextDecoder().decode(r)};var O=async()=>{let e=await chrome.storage.local.get(L);return e[L]&&e[L].template?e[L].template:N()};var x=(e,t)=>{let r=document.querySelector(e);if(!r)throw`Button element (${e}) not found.`;r.addEventListener("click",t),document.addEventListener("beforeunload",()=>{r.removeEventListener("click",t)})};var W=({index:e,entry:t})=>{let r=document.querySelector(`#button-${e}`);if(!r)throw`Cell for button not found: "#button-${e}"`;let n=document.createElement("button"),s=new URL(t.request.url);n.classList.add("href-button"),n.setAttribute("data-index",e.toString()),n.innerText=s.href.replace(s.origin,""),r.appendChild(n);let o=document.querySelector(`#report-${e}`);if(!o)throw`Report tr not found: "#report-${e}"`;let i=async()=>{let a=o.querySelector("pre");if(!a)throw"Report pre element not found";let c=await O();if(!a.textContent){let u=await I(t,c);a.innerHTML=u}o.classList.toggle("hidden")};x(`#button-${e} button.href-button`,i)};var K=(e,t)=>{let r=document.querySelector(`${"#table"} tbody`),{status:n}=e.response,{method:s}=e.request;r.insertAdjacentHTML("beforeend",`<tr>
      <td>
        <time datetime="${e.startedDateTime}" class="time">
          ${new Date(e.startedDateTime).toLocaleTimeString()}
        </time>
      </td>
      <td>${s}</td>
      <td>
        <response-status status="${n}"></response-status>
      </td>
      <td class="endpoint" id="button-${t}"></td>
    </tr>
    <tr class="hidden report" id="report-${t}">
      <td colspan="4">
        <copy-button target-selector="#report-${t} pre"></copy-button>
        <pre></pre>
      </td>
    </tr>
    `),W({index:t,entry:e})};var g={requests:[],isRecording:!0,allowedResourceTypes:["xhr","fetch"]};var F=(e,t)=>{let r=document.querySelector(e);if(!r)throw`Element selector ${e} not found.`;r.innerText=t};var q=e=>{F("#status",`Entries: ${e}`)};var z=()=>{g.requests.length=0;let e=document.querySelector(`${"#table"} tbody`);if(!e)throw`${"#table"} element not found`;e.innerHTML="",q(0)};var G=e=>typeof e=="string";var de=()=>{let e=document.querySelector("#status-dot");if(!e)throw`${"#status-dot"} not found`;e.setAttribute("is-recording",g.isRecording.toString())},J=e=>{g.isRecording=!g.isRecording,e.target.innerText=g.isRecording?"Pause":"Restore",de()};{let e;(n=>n.isRecording="is-recording")(e||={});class t extends HTMLElement{isRecording=!1;constructor(){super(),this.isRecording=this.getAttribute("is-recording")=="true"}connectedCallback(){this.createTemplate()}static get observedAttributes(){return["is-recording"]}attributeChangedCallback(n,s,o){switch(n){case"is-recording":this.isRecording=o==="true",this.createTemplate();break}}createTemplate(){this.innerHTML=`
        <div
          class="status-dot ${this.isRecording?"status-dot--recording":""}"
        ></div>
      `}}customElements.define("status-dot",t)}{class e extends HTMLElement{href=`chrome-extension://${chrome.runtime.id}/settings.html`;constructor(){super()}connectedCallback(){this.innerHTML=`
        \u2699\uFE0F
        <a href="${this.href}" target="_blank" class="link">
          Settings
        </a>
      `}}customElements.define("settings-link",e)}{let e;(s=>s.targetSelector="target-selector")(e||={});let t=n=>new Promise((s,o)=>{let i=document.createElement("textarea");i.value=n,document.body.append(i),i.select();let a=document.execCommand("copy");i.remove(),a||o(new Error("Unable to write to clipboard")),s()});class r extends HTMLElement{constructor(){super()}createTemplate(){this.innerHTML=`
        <button type="button" class="copy">
          Copy
        </button>
      `}async copyAction(s){let o=this.getAttribute("target-selector");if(!o)throw"No target selector provided";let i=document.querySelector(o);if(!i)throw`No target element for ${o} selector`;let a=i.innerText,c=s.target;try{if(await t(a),!s.target)return;c.innerText="Copied!",c.setAttribute("disabled","true"),setTimeout(()=>{c.innerText="Copy",c.removeAttribute("disabled")},750)}catch(u){console.error(u)}}appendEvents(){let s=this.querySelector("button");if(!s)throw"No button element found";s.addEventListener("click",this.copyAction.bind(this))}connectedCallback(){this.createTemplate(),this.appendEvents()}disconnectedCallback(){this.querySelector("button").removeEventListener("click",this.copyAction)}}customElements.define("copy-button",r)}{let e;(o=>o.status="status")(e||={});let t;(a=>(a.green="success",a.yellow="redirect",a.red="fail"))(t||={});let r=s=>s<200?"":s<300?"success":s<400?"redirect":"fail";class n extends HTMLElement{constructor(){super()}connectedCallback(){let o=this.getAttribute("status");this.innerHTML=`
        <span class="status ${o!==null?r(Number(o)):""}">
          ${o}
        </span>
      `}}customElements.define("response-status",n)}chrome.devtools.network.onRequestFinished.addListener(e=>{if(!g.isRecording)return;if(!G(e._resourceType))throw"request._resourceType value is not string";if(!g.allowedResourceTypes.includes(e._resourceType))return;let t=g.requests.push(e);K(e,t-1),q(t)}),document.addEventListener("beforeunload",()=>{g.requests.length=0}),document.addEventListener("DOMContentLoaded",()=>{x("#reset",z),x("#pause",J)});})();
/*! Bundled license information:

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)
*/
