(()=>{var C=(e,t)=>{let n=document.querySelector(e);if(!n)throw`Button element (${e}) not found.`;n.addEventListener("click",t),document.addEventListener("beforeunload",()=>{n.removeEventListener("click",t)})};var D=e=>{let t=document.querySelector(`#button-${e.id}`);if(!t)throw`Cell for button not found: "#button-${e.id}"`;let n=document.createElement("button"),r=new URL(e.url);n.classList.add("href-button"),n.innerText=r.pathname,t.appendChild(n);let o=document.querySelector(`#report-${e.id}`);if(!o)throw`Report tr not found: "#report-${e.id}"`;let s=()=>{o.classList.toggle("hidden")};C(`#button-${e.id} button.href-button`,s)};var _=e=>{document.querySelector("#table tbody").insertAdjacentHTML("beforeend",`<tr>
      <td>
        <time datetime="${e.dateTime}" class="time">
          ${new Date(e.dateTime).toLocaleTimeString()}
        </time>
      </td>
      <td>${e.method}</td>
      <td>
        <response-status status="${e.status}"></response-status>
      </td>
      <td class="endpoint" id="button-${e.id}"></td>
    </tr>
    <tr class="hidden report" id="report-${e.id}">
      <td colspan="4">
        <copy-button target-selector="#report-${e.id} pre"></copy-button>
        <pre>${e.report}</pre>
      </td>
    </tr>
    `),D(e)};var m={entries:[],isRecording:!0,allowedResourceTypes:["xhr","fetch"]};var z=(e,t)=>{let n=document.querySelector(e);if(!n)throw`Element selector ${e} not found.`;n.innerText=t};var M=e=>{z("#status",`Entries: ${e}`)};var j=()=>{m.entries.length=0;let e=document.querySelector("#table tbody");if(!e)throw"#table element not found";e.innerHTML="",M(0)};var I=e=>typeof e=="string";var Z=()=>{let e=document.querySelector("#status-dot");if(!e)throw"#status-dot not found";e.setAttribute("is-recording",m.isRecording.toString())},N=e=>{m.isRecording=!m.isRecording,e.target.innerText=m.isRecording?"Pause":"Restore",Z()};var ee=Object.prototype.toString,R=Array.isArray||function(t){return ee.call(t)==="[object Array]"};function P(e){return typeof e=="function"}function te(e){return R(e)?"array":typeof e}function B(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function O(e,t){return e!=null&&typeof e=="object"&&t in e}function re(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var ne=RegExp.prototype.test;function oe(e,t){return ne.call(e,t)}var se=/\S/;function ie(e){return!oe(se,e)}var ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function ce(e){return String(e).replace(/[&<>"'`=\/]/g,function(n){return ae[n]})}var ue=/\s*/,le=/\s+/,W=/\s*=/,pe=/\s*\}/,de=/#|\^|\/|>|\{|&|=|!/;function fe(e,t){if(!e)return[];var n=!1,r=[],o=[],s=[],i=!1,a=!1,c="",u=0;function d(){if(i&&!a)for(;s.length;)delete o[s.pop()];else s=[];i=!1,a=!1}var v,w,q;function U(y){if(typeof y=="string"&&(y=y.split(le,2)),!R(y)||y.length!==2)throw new Error("Invalid tags: "+y);v=new RegExp(B(y[0])+"\\s*"),w=new RegExp("\\s*"+B(y[1])),q=new RegExp("\\s*"+B("}"+y[1]))}U(t||g.tags);for(var l=new k(e),b,f,h,S,$,E;!l.eos();){if(b=l.pos,h=l.scanUntil(v),h)for(var H=0,Y=h.length;H<Y;++H)S=h.charAt(H),ie(S)?(s.push(o.length),c+=S):(a=!0,n=!0,c+=" "),o.push(["text",S,b,b+1]),b+=1,S===`
`&&(d(),c="",u=0,n=!1);if(!l.scan(v))break;if(i=!0,f=l.scan(de)||"name",l.scan(ue),f==="="?(h=l.scanUntil(W),l.scan(W),l.scanUntil(w)):f==="{"?(h=l.scanUntil(q),l.scan(pe),l.scanUntil(w),f="&"):h=l.scanUntil(w),!l.scan(w))throw new Error("Unclosed tag at "+l.pos);if(f==">"?$=[f,h,b,l.pos,c,u,n]:$=[f,h,b,l.pos],u++,o.push($),f==="#"||f==="^")r.push($);else if(f==="/"){if(E=r.pop(),!E)throw new Error('Unopened section "'+h+'" at '+b);if(E[1]!==h)throw new Error('Unclosed section "'+E[1]+'" at '+b)}else f==="name"||f==="{"||f==="&"?a=!0:f==="="&&U(h)}if(d(),E=r.pop(),E)throw new Error('Unclosed section "'+E[1]+'" at '+l.pos);return me(he(o))}function he(e){for(var t=[],n,r,o=0,s=e.length;o<s;++o)n=e[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function me(e){for(var t=[],n=t,r=[],o,s,i=0,a=e.length;i<a;++i)switch(o=e[i],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":s=r.pop(),s[5]=o[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(o)}return t}function k(e){this.string=e,this.tail=e,this.pos=0}k.prototype.eos=function(){return this.tail===""};k.prototype.scan=function(t){var n=this.tail.match(t);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};k.prototype.scanUntil=function(t){var n=this.tail.search(t),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function T(e,t){this.view=e,this.cache={".":this.view},this.parent=t}T.prototype.push=function(t){return new T(t,this)};T.prototype.lookup=function(t){var n=this.cache,r;if(n.hasOwnProperty(t))r=n[t];else{for(var o=this,s,i,a,c=!1;o;){if(t.indexOf(".")>0)for(s=o.view,i=t.split("."),a=0;s!=null&&a<i.length;)a===i.length-1&&(c=O(s,i[a])||re(s,i[a])),s=s[i[a++]];else s=o.view[t],c=O(o.view,t);if(c){r=s;break}o=o.parent}n[t]=r}return P(r)&&(r=r.call(this.view)),r};function p(){this.templateCache={_cache:{},set:function(t,n){this._cache[t]=n},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}p.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};p.prototype.parse=function(t,n){var r=this.templateCache,o=t+":"+(n||g.tags).join(":"),s=typeof r<"u",i=s?r.get(o):void 0;return i==null&&(i=fe(t,n),s&&r.set(o,i)),i};p.prototype.render=function(t,n,r,o){var s=this.getConfigTags(o),i=this.parse(t,s),a=n instanceof T?n:new T(n,void 0);return this.renderTokens(i,a,r,t,o)};p.prototype.renderTokens=function(t,n,r,o,s){for(var i="",a,c,u,d=0,v=t.length;d<v;++d)u=void 0,a=t[d],c=a[0],c==="#"?u=this.renderSection(a,n,r,o,s):c==="^"?u=this.renderInverted(a,n,r,o,s):c===">"?u=this.renderPartial(a,n,r,s):c==="&"?u=this.unescapedValue(a,n):c==="name"?u=this.escapedValue(a,n,s):c==="text"&&(u=this.rawValue(a)),u!==void 0&&(i+=u);return i};p.prototype.renderSection=function(t,n,r,o,s){var i=this,a="",c=n.lookup(t[1]);function u(w){return i.render(w,n,r,s)}if(c){if(R(c))for(var d=0,v=c.length;d<v;++d)a+=this.renderTokens(t[4],n.push(c[d]),r,o,s);else if(typeof c=="object"||typeof c=="string"||typeof c=="number")a+=this.renderTokens(t[4],n.push(c),r,o,s);else if(P(c)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,o.slice(t[3],t[5]),u),c!=null&&(a+=c)}else a+=this.renderTokens(t[4],n,r,o,s);return a}};p.prototype.renderInverted=function(t,n,r,o,s){var i=n.lookup(t[1]);if(!i||R(i)&&i.length===0)return this.renderTokens(t[4],n,r,o,s)};p.prototype.indentPartial=function(t,n,r){for(var o=n.replace(/[^ \t]/g,""),s=t.split(`
`),i=0;i<s.length;i++)s[i].length&&(i>0||!r)&&(s[i]=o+s[i]);return s.join(`
`)};p.prototype.renderPartial=function(t,n,r,o){if(r){var s=this.getConfigTags(o),i=P(r)?r(t[1]):r[t[1]];if(i!=null){var a=t[6],c=t[5],u=t[4],d=i;c==0&&u&&(d=this.indentPartial(i,u,a));var v=this.parse(d,s);return this.renderTokens(v,n,r,d,o)}}};p.prototype.unescapedValue=function(t,n){var r=n.lookup(t[1]);if(r!=null)return r};p.prototype.escapedValue=function(t,n,r){var o=this.getConfigEscape(r)||g.escape,s=n.lookup(t[1]);if(s!=null)return typeof s=="number"&&o===g.escape?String(s):o(s)};p.prototype.rawValue=function(t){return t[1]};p.prototype.getConfigTags=function(t){return R(t)?t:t&&typeof t=="object"?t.tags:void 0};p.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!R(t))return t.escape};var g={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){x.templateCache=e},get templateCache(){return x.templateCache}},x=new p;g.clearCache=function(){return x.clearCache()};g.parse=function(t,n){return x.parse(t,n)};g.render=function(t,n,r,o){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+te(t)+'" was given as the first argument for mustache#render(template, view, partials)');return x.render(t,n,r,o)};g.escape=ce;g.Scanner=k;g.Context=T;g.Writer=p;var K=g;var F=async(e,t)=>{let n=await new Promise(r=>{e.getContent(o=>{r(o)})});return e.response.content={...e.response.content,text:n},K.render(`${t.trim()}`,e)};var L="har_parser_settings";var G=async()=>{let e=await fetch("./defaultTemplate.mustache");if(!e.body)throw"No template response";let t=e.body.getReader(),{value:n}=await t.read();return new TextDecoder().decode(n)};var J=async()=>{let e=await chrome.storage.local.get(L);return e[L]&&e[L].template?e[L].template:G()};var Q=async e=>{let{status:t}=e.response,{method:n,url:r}=e.request,o=await J(),s=await F(e,o);return{id:crypto.randomUUID().split("-").slice(0,2).join(""),dateTime:e.startedDateTime,status:t,method:n,url:r,report:s}};{let e;(r=>r.isRecording="is-recording")(e||={});class t extends HTMLElement{isRecording=!1;constructor(){super()}connectedCallback(){this.isRecording=this.getAttribute("is-recording")=="true",this.createTemplate()}static get observedAttributes(){return["is-recording"]}attributeChangedCallback(r,o,s){switch(r){case"is-recording":this.isRecording=s==="true",this.createTemplate();break}}createTemplate(){this.innerHTML=`
        <div
          class="status-dot ${this.isRecording?"status-dot--recording":""}"
        ></div>
      `}}customElements.define("status-dot",t)}{class e extends HTMLElement{href=`chrome-extension://${chrome.runtime.id}/settings.html`;constructor(){super()}connectedCallback(){this.innerHTML=`
        \u2699\uFE0F
        <a href="${this.href}" target="_blank" class="link">
          Settings
        </a>
      `}}customElements.define("settings-link",e)}var V=e=>new Promise((t,n)=>{let r=document.createElement("textarea");r.value=e,document.body.append(r),r.select();let o=document.execCommand("copy");r.remove(),o||n(new Error("Unable to write to clipboard")),t()});{let e;(r=>r.targetSelector="target-selector")(e||={});class t extends HTMLElement{constructor(){super()}createTemplate(){this.innerHTML=`
        <button type="button" class="copy">
          Copy
        </button>
      `}async copyAction(r){let o=this.getAttribute("target-selector");if(!o)throw"No target selector provided";let s=document.querySelector(o);if(!s)throw`No target element for ${o} selector`;let i=s.innerText,a=r.target;try{if(await V(i),!r.target)return;a.innerText="Copied!",a.setAttribute("disabled","true"),setTimeout(()=>{a.innerText="Copy",a.removeAttribute("disabled")},750)}catch(c){console.error(c)}}appendEvents(){let r=this.querySelector("button");if(!r)throw"No button element found";r.addEventListener("click",this.copyAction.bind(this))}removeEvents(){this.querySelector("button")&&this.querySelector("button").removeEventListener("click",this.copyAction)}connectedCallback(){this.createTemplate(),this.appendEvents()}disconnectedCallback(){this.removeEvents()}}customElements.define("copy-button",t)}var X=e=>e<200?"":e<300?"success":e<400?"redirect":"fail";{let e;(r=>r.status="status")(e||={});class t extends HTMLElement{constructor(){super()}connectedCallback(){let r=this.getAttribute("status");this.innerHTML=`
        <span class="status ${r!==null?X(Number(r)):""}">
          ${r}
        </span>
      `}}customElements.define("response-status",t)}chrome.devtools.network.onRequestFinished.addListener(async e=>{if(!m.isRecording)return;if(!I(e._resourceType))throw"request._resourceType value is not string";if(!m.allowedResourceTypes.includes(e._resourceType))return;let t=await Q(e),n=m.entries.push(t);_(t),M(n)}),document.addEventListener("beforeunload",()=>{m.entries.length=0}),document.addEventListener("DOMContentLoaded",()=>{C("#reset",j),C("#pause",N)});})();
/*! Bundled license information:

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)
*/
